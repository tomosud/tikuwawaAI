# Chihuahua vs Chikuwa Classifier

チワワ（犬種）とチクワ（食品）を画像から判別するAI分類ツール

## 概要

このプロジェクトは、画像内の対象が「チワワ（犬種）」か「チクワ（食品）」かをAIで判別する画像分類ツールです。
Pythonを用い、Windows環境で動作可能な形に構築します。

## 環境要件

- Python 3.11
- Windows 11
- 仮想環境：`C:\work\script\tikuwawaAI\venv`

## セットアップ

### 1. 仮想環境の作成と有効化

```bash
# 仮想環境作成
python -m venv venv

# 仮想環境有効化 (Windows)
venv\Scripts\activate
```

### 2. 依存関係のインストール

```bash
pip install -r requirements.txt
```

## フェーズ構成

### Phase 1: 画像収集（データ収集） ✅ **完了**

**目的：** 「チワワ」「チクワ」の画像をネットから自動でダウンロード

**実装完了状況：**
- ✅ **データセット**: チワワ25枚、チクワ25枚（計50枚）
- ✅ **品質管理**: パッケージ画像等を除外し、判定に適した画像のみ選別
- ✅ **Git管理**: フェアユース範囲で画像をリポジトリに含めて管理
- ✅ **エラーハンドリング**: レート制限回避とロバストな収集処理

**使用技術：**
- `duckduckgo_search`（API制限回避実装済み）
- `requests`（画像ダウンロード）
- `Pillow`（画像検証・処理）
- `pathlib`（フォルダ管理）
- `uuid`（ファイル名の一意性）

**最終ディレクトリ構造：**
```
project_root/
├── dataset/
│   ├── chihuahua/          # チワワ画像 25枚
│   └── chikuwa/            # チクワ画像 25枚（50枚から選別）
├── download_images.py      # 詳細版収集スクリプト
└── simple_download.py      # 実際に成功したシンプル版
```

**実装済み機能：**
- 複数検索クエリによる多様な画像収集
- 適切なファイルサイズ・形式チェック（1KB-5MB）
- レート制限回避（0.8秒間隔）
- UUID付きファイル名で重複防止
- エラーハンドリングとログ出力
- 人的品質管理による最終選別

### Phase 2: データ前処理 🔄 **次のフェーズ**

**目的：** モデル学習用に画像をクリーンに整形

**予定技術：**
- `opencv-python` / `PIL`（画像リサイズ）
- 画像サイズ統一：224x224px
- 拡張子：`.jpg` 推奨
- 学習・検証・テスト分割（8:1:1）

### Phase 3: AIモデルの学習 📅 **予定**

**目的：** 「チワワ」と「チクワ」を分類する2クラス画像分類モデルを作成

**予定技術：**
- フレームワーク：PyTorch
- 学習方法：転移学習（ResNet18ベース）
- 学習環境：ローカルCPU/GPU
- 目標精度：90%以上

### Phase 4: 推論・ツール作成 📅 **予定**

**目的：** 任意の画像ファイルに対して「チワワ」or「チクワ」を判定するツールを作成

**予定技術：**
- GUI：Gradio
- CLI版も併設予定
- 信頼度スコア表示

## 使用方法

### Phase 1: 画像収集（完了済み）

データセットは既に収集・選別済みです。追加で画像収集する場合：

```bash
# シンプル版（推奨）
python simple_download.py

# 詳細版
python download_images.py
```

### データセット確認

```bash
# データセット構造確認
ls dataset/chihuahua/ | wc -l  # チワワ画像数
ls dataset/chikuwa/ | wc -l    # チクワ画像数
```

## プロジェクト進捗状況

### ✅ 完了済み

- **Phase 1: 画像収集** - チワワ25枚、チクワ25枚の高品質データセット構築
- **Git管理設定** - フェアユース範囲での画像リポジトリ管理
- **品質管理** - 人的選別による判定に適した画像のみ残存
- **エラーハンドリング** - ロバストな画像収集システム

### 🔄 次のステップ

- **Phase 2: データ前処理** - 画像リサイズ・正規化・データ分割

### 📊 データセット詳細

- **総画像数**: 50枚（バランス良く各25枚）
- **画像品質**: パッケージ画像等を除外済み
- **ファイル形式**: JPEG
- **著作権**: 研究・教育目的のフェアユース範囲

## ライセンス

MIT License

## 注意点（Windows環境）

- `torch` はGPUなしでもOKですが、`torchvision` バージョンに注意
- `duckduckgo_search` は `duckduckgo-search` でインストール
- 画像収集においてCAPTCHAが出る場合はAPI回数を抑えるかスリープを挟む

## 著作権について

このプロジェクトに含まれる画像は、研究・教育目的のフェアユース（公正利用）の範囲内で使用されています。商用利用は行いません。